#:import Factory kivy.factory.Factory

<WindowManager>:
    #mapped over from windows declared in Python
    Start_Screen:
    Battle_Screen:
    Result_Screen:

<Start_Screen>:
    name: "Start_Screen"

    FloatLayout:
        Button:
            background_normal: 'records.png'
            pos_hint: {"x":0.1, "top":.3}
            height: 80
            size_hint_y: None
            width: 80
            size_hint_x: None
            font_size: 20
            on_release: root.parent.Recordspop()
            # on_release: root.add_widget(Factory.Recordspop())

        Button:
            background_normal: 'info.png'
            pos_hint: {"top":.3,"right":.9}
            # size_hint: 0.2, 0.2
            height: 80
            size_hint_y: None
            width: 80
            size_hint_x: None
            # on_release: MyPopup.open()
            on_release: Factory.Widget.Infopop().open()

        Button:
            text: "Enter"
            # background_normal: 'normal.png'
            pos_hint: {"center_x":.5,"center_y":.5}
            size_hint: 0.6, 0.2
            # on_release:
            #     app.root.current = "Battle_Screen"
            #     root.manager.transition.direction = "left"
            # on_release: Arena.Foo.func(2,3)

        Label:
            text: 'Welcome to the Arena'
            pos_hint: {"center_x":.5,"center_y":.8}
            size_hint: 0.6, 0.2
            font_size: 40

<Battle_Screen>:
    name: "Battle_Screen"

    FloatLayout:

        Image:
            source: 'player1.png'
            pos_hint: {"x":0.1, "top":.9}
            size_hint: 0.2, 0.2

        Label:
            id: player1hp
            text: 'HP \n 5'
            pos_hint: {"center_x":.35,"center_y":.85}

        Image:
            id: player1used
            source: 'shield.png'
            pos_hint: {"center_x":.35,"center_y":.75}
            size_hint: 0.1, 0.1

        Image:
            source: 'player2.png'
            pos_hint: {"x":0.7, "top":.9}
            size_hint: 0.2, 0.2

        Label:
            id: player2hp
            text: 'HP \n 5'
            pos_hint: {"center_x":.65,"center_y":.85}

        Image:
            id: player2used
            source: 'shield.png'
            pos_hint: {"center_x":.65,"center_y":.75}
            size_hint: 0.1, 0.1

        Button:
            id: infobtn
            background_normal: 'info.png'
            pos_hint: {"top":.3,"right":.9}
            height: 80
            size_hint_y: None
            width: 80
            size_hint_x: None
            # on_release goes to result screen for testing
            on_release:
                app.root.current = "Result_Screen"
                root.manager.transition.direction = "left"
            # on_release: Factory.Infopop().open()

        Button:
            id: backbtn
            text: "Back"
            pos_hint: {"x":0.1, "top":.3}
            height: 80
            size_hint_y: None
            width: 80
            size_hint_x: None
            font_size: 20
            on_release:
                app.root.current = "Start_Screen"
                root.manager.transition.direction = "right"

    #give these buttons absolute size later or scaling size
        Button:
            id: swordbtn
            background_normal: 'sword.png'
            pos_hint: {"center_x":.2,"center_y":.5}
            size_hint: 0.2, 0.2

        Button:
            id: axebtn
            background_normal: 'axe.png'
            pos_hint: {"center_x":.4,"center_y":.5}
            size_hint: 0.2, 0.2

        Button:
            id: spearbtn
            background_normal: 'spear.png'
            pos_hint: {"center_x":.6,"center_y":.5}
            size_hint: 0.2, 0.2

    #try laying a transparent button over the image
        Button:
            id: shieldbtn
            background_normal: 'shield.png'
            pos_hint: {"center_x":.8,"center_y":.5}
            size_hint: 0.2, 0.2

        Label:
            id: gameoutput
            text: 'Player 1 used Shield \n Player 2 used Shield \n No damage!'
            pos_hint: {"center_x":.5,"center_y":.8}

<Result_Screen>:
    name: "Result_Screen"

    FloatLayout:
        Button:
            id: backbtn
            text: "Back"
            pos_hint: {"x":0.1, "top":.3}
            height: 80
            size_hint_y: None
            width: 80
            size_hint_x: None
            font_size: 20
            on_release:
                app.root.current = "Start_Screen"
                root.manager.transition.direction = "right"

        Button:
            id: recordsbtn
            background_normal: 'records.png'
            pos_hint: {"top":.3,"right":.9}
            height: 80
            size_hint_y: None
            width: 80
            size_hint_x: None

        Button:
            id: playagain
            text: "Play again?"
            pos_hint: {"center_x":.5,"center_y":.2}
            size_hint: 0.4, 0.2
            on_release:
                app.root.current = "Battle_Screen"
                root.manager.transition.direction = "left"

#popups can only have one widget...
#and if that widget is layout, it can have multiple children

# <Infopop@Popup>:  
#     FloatLayout:
#         Button:
#             text: "Revel in glory"
#             # background_normal: 'normal.png'
#             pos_hint: {"center_x":.5,"center_y":.2}
#             size_hint: 0.4, 0.2
#             on_release:
#                 root.dismiss()

# <Infopop>:
#     FloatLayout:
#         Button:
#             text: "Revel in glory"
#             # background_normal: 'normal.png'
#             pos_hint: {"center_x":.5,"center_y":.2}
#             size_hint: 0.4, 0.2
#             on_release:
#                 root.dismiss()

